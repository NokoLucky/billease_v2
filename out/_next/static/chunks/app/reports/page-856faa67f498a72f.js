(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[22],{9807:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>S});var a=r(95155),l=r(12115),n=r(3401),s=r(96025),i=r(16238),c=r(83394),o=r(8782),d=r(34e3),u=r(54811),m=r(66695),h=r(83540),x=r(94517),f=r(24026),p=r(59434);let g={light:"",dark:".dark"},j=l.createContext(null);function v(){let e=l.useContext(j);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let b=l.forwardRef((e,t)=>{let{id:r,className:n,children:s,config:i,...c}=e,o=l.useId(),d="chart-".concat(r||o.replace(/:/g,""));return(0,a.jsx)(j.Provider,{value:{config:i},children:(0,a.jsxs)("div",{"data-chart":d,ref:t,className:(0,p.cn)("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",n),...c,children:[(0,a.jsx)(y,{id:d,config:i}),(0,a.jsx)(h.u,{children:s})]})})});b.displayName="Chart";let y=e=>{let{id:t,config:r}=e,l=Object.entries(r).filter(e=>{let[,t]=e;return t.theme||t.color});return l.length?(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(g).map(e=>{let[r,a]=e;return"\n".concat(a," [data-chart=").concat(t,"] {\n").concat(l.map(e=>{var t;let[a,l]=e,n=(null==(t=l.theme)?void 0:t[r])||l.color;return n?"  --color-".concat(a,": ").concat(n,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null},N=x.m,w=l.forwardRef((e,t)=>{let{active:r,payload:n,className:s,indicator:i="dot",hideLabel:c=!1,hideIndicator:o=!1,label:d,labelFormatter:u,labelClassName:m,formatter:h,color:x,nameKey:f,labelKey:g}=e,{config:j}=v(),b=l.useMemo(()=>{var e;if(c||!(null==n?void 0:n.length))return null;let[t]=n,r="".concat(g||t.dataKey||t.name||"value"),l=C(j,t,r),s=g||"string"!=typeof d?null==l?void 0:l.label:(null==(e=j[d])?void 0:e.label)||d;return u?(0,a.jsx)("div",{className:(0,p.cn)("font-medium",m),children:u(s,n)}):s?(0,a.jsx)("div",{className:(0,p.cn)("font-medium",m),children:s}):null},[d,u,n,c,m,j,g]);if(!r||!(null==n?void 0:n.length))return null;let y=1===n.length&&"dot"!==i;return(0,a.jsxs)("div",{ref:t,className:(0,p.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",s),children:[y?null:b,(0,a.jsx)("div",{className:"grid gap-1.5",children:n.map((e,t)=>{let r="".concat(f||e.name||e.dataKey||"value"),l=C(j,e,r),n=x||e.payload.fill||e.color;return(0,a.jsx)("div",{className:(0,p.cn)("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===i&&"items-center"),children:h&&(null==e?void 0:e.value)!==void 0&&e.name?h(e.value,e.name,e,t,e.payload):(0,a.jsxs)(a.Fragment,{children:[(null==l?void 0:l.icon)?(0,a.jsx)(l.icon,{}):!o&&(0,a.jsx)("div",{className:(0,p.cn)("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===i,"w-1":"line"===i,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===i,"my-0.5":y&&"dashed"===i}),style:{"--color-bg":n,"--color-border":n}}),(0,a.jsxs)("div",{className:(0,p.cn)("flex flex-1 justify-between leading-none",y?"items-end":"items-center"),children:[(0,a.jsxs)("div",{className:"grid gap-1.5",children:[y?b:null,(0,a.jsx)("span",{className:"text-muted-foreground",children:(null==l?void 0:l.label)||e.name})]}),e.value&&(0,a.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})});w.displayName="ChartTooltip";let k=f.s,_=l.forwardRef((e,t)=>{let{className:r,hideIcon:l=!1,payload:n,verticalAlign:s="bottom",nameKey:i}=e,{config:c}=v();return(null==n?void 0:n.length)?(0,a.jsx)("div",{ref:t,className:(0,p.cn)("flex items-center justify-center gap-4","top"===s?"pb-3":"pt-3",r),children:n.map(e=>{let t="".concat(i||e.dataKey||"value"),r=C(c,e,t);return(0,a.jsxs)("div",{className:(0,p.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==r?void 0:r.icon)&&!l?(0,a.jsx)(r.icon,{}):(0,a.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==r?void 0:r.label]},e.value)})}):null});function C(e,t,r){if("object"!=typeof t||null===t)return;let a="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,l=r;return r in t&&"string"==typeof t[r]?l=t[r]:a&&r in a&&"string"==typeof a[r]&&(l=a[r]),l in e?e[l]:e[r]}_.displayName="ChartLegend";var D=r(94260),R=r(1407),L=r(37140),M=r(83013);let P=["hsl(var(--chart-1))","hsl(var(--chart-2))","hsl(var(--chart-3))","hsl(var(--chart-4))","hsl(var(--chart-5))"];function E(e){let{bills:t}=e,r=(0,l.useMemo)(()=>{let e=(0,D.i)({start:(0,R.D)((0,L.a)(new Date,5)),end:new Date}).map(e=>({name:(0,M.GP)(e,"MMM"),total:0}));return t.filter(e=>e.isPaid).forEach(t=>{if(new Date(t.dueDate).getMonth(),new Date(t.dueDate).getFullYear()===new Date().getFullYear()){let r=(0,M.GP)(new Date(t.dueDate),"MMM"),a=e.find(e=>e.name===r);a&&(a.total+=t.amount)}}),e},[t]),h=(0,l.useMemo)(()=>{let e={};return t.filter(e=>e.isPaid).forEach(t=>{e[t.category]||(e[t.category]=0),e[t.category]+=t.amount}),Object.entries(e).map(e=>{let[t,r]=e;return{name:t,value:Number(r.toFixed(2))}})},[t]),x=(0,l.useMemo)(()=>0===h.length?{}:h.reduce((e,t,r)=>(e[t.name]={label:t.name,color:P[r%P.length]},e),{}),[h]);return(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start",children:[(0,a.jsxs)(m.Zp,{children:[(0,a.jsxs)(m.aR,{children:[(0,a.jsx)(m.ZB,{children:"Bills Paid Over Time"}),(0,a.jsx)(m.BT,{children:"Last 6 months"})]}),(0,a.jsx)(m.Wu,{children:(0,a.jsx)(b,{config:{total:{label:"Total Paid",color:"hsl(var(--chart-1))"}},className:"h-[300px] w-full",children:(0,a.jsxs)(n.E,{data:r,accessibilityLayer:!0,children:[(0,a.jsx)(N,{content:(0,a.jsx)(w,{})}),(0,a.jsx)(s.W,{dataKey:"name",tickLine:!1,axisLine:!1}),(0,a.jsx)(i.h,{tickLine:!1,axisLine:!1,tickFormatter:e=>"R".concat(e)}),(0,a.jsx)(c.y,{dataKey:"total",fill:"var(--color-total)",radius:4})]})})})]}),(0,a.jsxs)(m.Zp,{children:[(0,a.jsxs)(m.aR,{children:[(0,a.jsx)(m.ZB,{children:"Spending by Category"}),(0,a.jsx)(m.BT,{children:"Breakdown of paid bills by category"})]}),(0,a.jsx)(m.Wu,{className:"flex items-center justify-center",children:h.length>0?(0,a.jsx)(b,{config:x,className:"h-[300px] w-full",children:(0,a.jsxs)(o.r,{children:[(0,a.jsx)(N,{content:(0,a.jsx)(w,{nameKey:"name"})}),(0,a.jsx)(d.F,{data:h,dataKey:"value",nameKey:"name",innerRadius:60,children:h.map((e,t)=>{var r;return(0,a.jsx)(u.f,{fill:null==(r=x[e.name])?void 0:r.color},"cell-".concat(t))})}),(0,a.jsx)(k,{content:(0,a.jsx)(_,{nameKey:"name"})})]})}):(0,a.jsx)("div",{className:"h-[300px] flex items-center justify-center text-muted-foreground",children:"No paid bills to display."})})]})]})}var K=r(30285),B=r(68718),F=r(50172),T=r(74737),O=r(9086);function S(){let{bills:e,loading:t}=(0,O.u1)();return(0,a.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,a.jsx)(T.z,{title:"Reports & History",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsxs)(K.$,{variant:"outline",onClick:()=>{if(!e||0===e.length)return void alert("No bills to export.");let t=new Blob([["ID,Name,Amount,Due Date,Category,Status,Frequency",...e.map(e=>[e.id,'"'.concat(e.name.replace(/"/g,'""'),'"'),e.amount,new Date(e.dueDate).toLocaleDateString(),e.category,e.isPaid?"Paid":"Unpaid",e.frequency].join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a");if(void 0!==r.download){let e=URL.createObjectURL(t);r.setAttribute("href",e),r.setAttribute("download","bills_export.csv"),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)}},disabled:t||0===e.length,children:[(0,a.jsx)(B.A,{className:"mr-2"}),"Export CSV"]}),(0,a.jsxs)(K.$,{variant:"outline",children:[(0,a.jsx)(B.A,{className:"mr-2"}),"Export PDF"]})]})}),(0,a.jsx)("main",{className:"flex-1 py-8 px-4 md:px-8",children:t?(0,a.jsx)("div",{className:"flex h-64 w-full items-center justify-center",children:(0,a.jsx)(F.A,{className:"h-8 w-8 animate-spin"})}):(0,a.jsx)(E,{bills:e})})]})}},64050:(e,t,r)=>{Promise.resolve().then(r.bind(r,9807))},66695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>o,Wu:()=>d,ZB:()=>c,Zp:()=>s,aR:()=>i,wL:()=>u});var a=r(95155),l=r(12115),n=r(59434);let s=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...l})});s.displayName="Card";let i=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...l})});i.displayName="CardHeader";let c=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...l})});c.displayName="CardTitle";let o=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...l})});o.displayName="CardDescription";let d=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...l})});d.displayName="CardContent";let u=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...l})});u.displayName="CardFooter"},74737:(e,t,r)=>{"use strict";r.d(t,{z:()=>s});var a=r(95155),l=r(84407),n=r(59434);function s(e){let{title:t,children:r,className:s}=e;return(0,a.jsxs)("header",{className:(0,n.cn)("flex items-center justify-between pb-4 border-b sticky top-0 bg-background z-10 p-4 md:p-0 md:relative md:bg-transparent md:border-none",s),children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(l.SidebarTrigger,{className:"md:hidden"}),(0,a.jsx)("h1",{className:"text-3xl font-bold font-headline",children:t})]}),r]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,644,615,419,13,876,33,441,684,358],()=>t(64050)),_N_E=e.O()}]);