(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5349:(e,t,s)=>{"use strict";s.d(t,{S:()=>C});var a=s(95155),n=s(12115),i=s(6101),r=s(46081),l=s(85185),d=s(5845),c=s(45503),o=s(11275),u=s(28905),m=s(63540),h="Checkbox",[x,f]=(0,r.A)(h),[p,N]=x(h),j=n.forwardRef((e,t)=>{let{__scopeCheckbox:s,name:r,checked:c,defaultChecked:o,required:u,disabled:h,value:x="on",onCheckedChange:f,form:N,...j}=e,[g,v]=n.useState(null),b=(0,i.s)(t,e=>v(e)),k=n.useRef(!1),C=!g||N||!!g.closest("form"),[E=!1,T]=(0,d.i)({prop:c,defaultProp:o,onChange:f}),P=n.useRef(E);return n.useEffect(()=>{let e=null==g?void 0:g.form;if(e){let t=()=>T(P.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[g,T]),(0,a.jsxs)(p,{scope:s,state:E,disabled:h,children:[(0,a.jsx)(m.sG.button,{type:"button",role:"checkbox","aria-checked":y(E)?"mixed":E,"aria-required":u,"data-state":D(E),"data-disabled":h?"":void 0,disabled:h,value:x,...j,ref:b,onKeyDown:(0,l.m)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,l.m)(e.onClick,e=>{T(e=>!!y(e)||!e),C&&(k.current=e.isPropagationStopped(),k.current||e.stopPropagation())})}),C&&(0,a.jsx)(w,{control:g,bubbles:!k.current,name:r,value:x,checked:E,required:u,disabled:h,form:N,style:{transform:"translateX(-100%)"},defaultChecked:!y(o)&&o})]})});j.displayName=h;var g="CheckboxIndicator",v=n.forwardRef((e,t)=>{let{__scopeCheckbox:s,forceMount:n,...i}=e,r=N(g,s);return(0,a.jsx)(u.C,{present:n||y(r.state)||!0===r.state,children:(0,a.jsx)(m.sG.span,{"data-state":D(r.state),"data-disabled":r.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});v.displayName=g;var w=e=>{let{control:t,checked:s,bubbles:i=!0,defaultChecked:r,...l}=e,d=n.useRef(null),u=(0,c.Z)(s),m=(0,o.X)(t);n.useEffect(()=>{let e=d.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(u!==s&&t){let a=new Event("click",{bubbles:i});e.indeterminate=y(s),t.call(e,!y(s)&&s),e.dispatchEvent(a)}},[u,s,i]);let h=n.useRef(!y(s)&&s);return(0,a.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:null!=r?r:h.current,...l,tabIndex:-1,ref:d,style:{...e.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function y(e){return"indeterminate"===e}function D(e){return y(e)?"indeterminate":e?"checked":"unchecked"}var b=s(10518),k=s(59434);let C=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(j,{ref:t,className:(0,k.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...n,children:(0,a.jsx)(v,{className:(0,k.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(b.A,{className:"h-4 w-4"})})})});C.displayName=j.displayName},51920:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(40157).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},68639:(e,t,s)=>{Promise.resolve().then(s.bind(s,83648))},83648:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>R});var a=s(95155),n=s(34419),i=s(66695),r=s(83013),l=s(68856),d=s(9086);function c(e){let{bills:t,loading:s}=e,{profile:n,loading:c}=(0,d.xc)(),o=t.filter(e=>!e.isPaid&&new Date(e.dueDate)>=new Date),u=o.length>0?o.sort((e,t)=>new Date(e.dueDate).getTime()-new Date(t.dueDate).getTime())[0]:null,m=o.reduce((e,t)=>e+t.amount,0);return t.filter(e=>e.isPaid).reduce((e,t)=>e+t.amount,0),null==n||n.income,(n&&n.income>0&&n.income,s||c)?(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{children:"Next Due Bill"})}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsx)(l.E,{className:"h-8 w-3/4 mb-2"}),(0,a.jsx)(l.E,{className:"h-4 w-1/2"})]})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{children:"Total Upcoming"})}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsx)(l.E,{className:"h-8 w-3/4 mb-2"}),(0,a.jsx)(l.E,{className:"h-4 w-1/2"})]})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{children:"Savings Goal"})}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsx)(l.E,{className:"h-8 w-3/4 mb-2"}),(0,a.jsx)(l.E,{className:"h-4 w-1/2"})]})]})]}):(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{children:"Next Due Bill"})}),(0,a.jsx)(i.Wu,{children:u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{className:"text-2xl font-bold font-headline",children:["R",u.amount.toFixed(2)]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[u.name," - Due ",(0,r.GP)(new Date(u.dueDate),"PPP")]})]}):(0,a.jsx)("p",{className:"text-muted-foreground",children:"No upcoming bills!"})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{children:"Total Upcoming"})}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsxs)("p",{className:"text-2xl font-bold font-headline",children:["R",m.toFixed(2)]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[o.length," bills remaining"]})]})]})]})}var o=s(12115),u=s(5349),m=s(39022),h=s(59434),x=s(92084),f=s(33520),p=s(41876);let N={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},j=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,g=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,v=/^([+-])(\d{2})(?::?(\d{2}))?$/;function w(e){return e?parseInt(e):1}function y(e){return e&&parseFloat(e.replace(",","."))||0}let D=[31,null,31,30,31,30,31,31,30,31,30,31];function b(e){return e%400==0||e%4==0&&e%100!=0}var k=s(32044),C=s(87481);function E(e){let{bills:t,loading:s,onBillUpdated:n}=e,{user:c}=(0,k.A)(),{toast:E}=(0,C.dj)(),[T,P]=(0,o.useTransition)(),Z=t.filter(e=>{var t;return t=function(e,t){let s,a,n=function(e){let t,s={},a=e.split(N.dateTimeDelimiter);if(a.length>2)return s;if(/:/.test(a[0])?t=a[0]:(s.date=a[0],t=a[1],N.timeZoneDelimiter.test(s.date)&&(s.date=e.split(N.timeZoneDelimiter)[0],t=e.substr(s.date.length,e.length))),t){let e=N.timezone.exec(t);e?(s.time=t.replace(e[1],""),s.timezone=e[1]):s.time=t}return s}(e);if(n.date){let e=function(e,t){let s=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=e.match(s);if(!a)return{year:NaN,restDateString:""};let n=a[1]?parseInt(a[1]):null,i=a[2]?parseInt(a[2]):null;return{year:null===i?n:100*i,restDateString:e.slice((a[1]||a[2]).length)}}(n.date,2);s=function(e,t){var s,a,n,i,r,l,d,c;if(null===t)return new Date(NaN);let o=e.match(j);if(!o)return new Date(NaN);let u=!!o[4],m=w(o[1]),h=w(o[2])-1,x=w(o[3]),f=w(o[4]),p=w(o[5])-1;if(u){return(s=0,a=f,n=p,a>=1&&a<=53&&n>=0&&n<=6)?function(e,t,s){let a=new Date(0);a.setUTCFullYear(e,0,4);let n=a.getUTCDay()||7;return a.setUTCDate(a.getUTCDate()+((t-1)*7+s+1-n)),a}(t,f,p):new Date(NaN)}{let e=new Date(0);return(i=t,r=h,l=x,r>=0&&r<=11&&l>=1&&l<=(D[r]||(b(i)?29:28))&&(d=t,(c=m)>=1&&c<=(b(d)?366:365)))?(e.setUTCFullYear(t,h,Math.max(m,x)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);let i=s.getTime(),r=0;if(n.time&&isNaN(r=function(e){var t,s,a;let n=e.match(g);if(!n)return NaN;let i=y(n[1]),r=y(n[2]),l=y(n[3]);return(t=i,s=r,a=l,24===t?0===s&&0===a:a>=0&&a<60&&s>=0&&s<60&&t>=0&&t<25)?i*p.s0+r*p.Cg+1e3*l:NaN}(n.time)))return new Date(NaN);if(n.timezone){if(isNaN(a=function(e){var t,s;if("Z"===e)return 0;let a=e.match(v);if(!a)return 0;let n="+"===a[1]?-1:1,i=parseInt(a[2]),r=a[3]&&parseInt(a[3])||0;return(t=0,(s=r)>=0&&s<=59)?n*(i*p.s0+r*p.Cg):NaN}(n.timezone)))return new Date(NaN)}else{let e=new Date(i+r),t=new Date(0);return t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t}return new Date(i+r+a)}(e.dueDate),(0,f.t)(t,(0,x.w)(t,Date.now()))}).sort((e,t)=>new Date(e.dueDate).getTime()-new Date(t.dueDate).getTime()),M=e=>{c&&P(async()=>{try{await (0,d.Ns)(c.uid,e.id,{isPaid:!e.isPaid}),n(),E({title:"Success",description:"".concat(e.name," marked as ").concat(e.isPaid?"unpaid":"paid",".")})}catch(e){E({variant:"destructive",title:"Error",description:"Failed to update bill status."})}})},R=e=>{let t=m.L.find(t=>t.name===e);return t?(0,a.jsx)(t.icon,{className:"w-5 h-5"}):null};return s?(0,a.jsx)(i.Zp,{children:(0,a.jsx)(i.Wu,{className:"p-0",children:(0,a.jsx)("div",{className:"divide-y divide-border",children:[void 0,void 0,void 0].map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-4 p-4",children:[(0,a.jsx)(l.E,{className:"h-10 w-10 rounded-lg"}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsx)(l.E,{className:"h-4 w-3/4"}),(0,a.jsx)(l.E,{className:"h-4 w-1/2"})]}),(0,a.jsx)("div",{className:"text-right space-y-2",children:(0,a.jsx)(l.E,{className:"h-6 w-20"})}),(0,a.jsx)("div",{className:"pl-4",children:(0,a.jsx)(l.E,{className:"h-6 w-6"})})]},t))})})}):0!==Z.length||s?(0,a.jsx)(i.Zp,{children:(0,a.jsx)(i.Wu,{className:"p-0",children:(0,a.jsx)("div",{className:"divide-y divide-border",children:Z.map(e=>(0,a.jsxs)("div",{className:(0,h.cn)("flex items-center gap-4 p-4 transition-all duration-300",e.isPaid&&"bg-secondary/50"),children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-secondary text-secondary-foreground",children:R(e.category)}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:(0,h.cn)("font-semibold",e.isPaid&&"line-through text-muted-foreground"),children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Due ",(0,r.GP)(new Date(e.dueDate),"MMM dd, yyyy")]})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("p",{className:(0,h.cn)("font-bold text-lg",e.isPaid&&"line-through text-muted-foreground"),children:["R",e.amount.toFixed(2)]})}),(0,a.jsxs)("div",{className:"flex items-center pl-4",children:[(0,a.jsx)(u.S,{id:"paid-".concat(e.id),checked:e.isPaid,onCheckedChange:()=>M(e),className:"w-6 h-6",disabled:T}),(0,a.jsxs)("label",{htmlFor:"paid-".concat(e.id),className:"sr-only",children:["Mark ",e.name," as ",e.isPaid?"unpaid":"paid"]})]})]},e.id))})})}):(0,a.jsx)(i.Zp,{children:(0,a.jsx)(i.Wu,{className:"p-8 text-center text-muted-foreground",children:"No bills due this month. You're all caught up! \uD83C\uDF89"})})}var T=s(30285),P=s(34301),Z=s(51920),M=s(74737);function R(){let{user:e}=(0,k.A)(),{bills:t,loading:s,refetch:i}=(0,d.u1)();if(!e)return null;let l=(0,r.GP)(new Date,"MMMM yyyy");return(0,a.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,a.jsx)(M.z,{title:"Dashboard",children:(0,a.jsx)(n.k,{onBillAdded:i,children:(0,a.jsxs)(T.$,{children:[(0,a.jsx)(P.A,{className:"mr-2"}),"Add Bill"]})})}),(0,a.jsxs)("main",{className:"flex-1 py-8 px-4 md:px-8",children:[(0,a.jsx)(c,{bills:t,loading:s}),(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(Z.A,{className:"w-5 h-5"}),(0,a.jsxs)("h2",{className:"text-2xl font-bold font-headline",children:["Bills for ",l]})]}),(0,a.jsx)(E,{bills:t,loading:s,onBillUpdated:i})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,644,615,419,521,13,425,43,937,33,565,441,684,358],()=>t(68639)),_N_E=e.O()}]);