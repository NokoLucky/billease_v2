(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[395],{26126:(e,a,t)=>{"use strict";t.d(a,{E:()=>i});var s=t(95155);t(12115);var l=t(74466),r=t(59434);let n=(0,l.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:a,variant:t,...l}=e;return(0,s.jsx)("div",{className:(0,r.cn)(n({variant:t}),a),...l})}},44838:(e,a,t)=>{"use strict";t.d(a,{M5:()=>f,SQ:()=>p,_2:()=>j,dc:()=>u,lp:()=>y,lv:()=>x,mB:()=>g,nV:()=>h,rI:()=>c,ty:()=>m});var s=t(95155),l=t(12115),r=t(89615),n=t(73158),i=t(10518),d=t(70154),o=t(59434);let c=r.bL,m=r.l9;r.YJ;let u=r.ZL,x=r.Pb;r.z6;let h=l.forwardRef((e,a)=>{let{className:t,inset:l,children:i,...d}=e;return(0,s.jsxs)(r.ZP,{ref:a,className:(0,o.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",l&&"pl-8",t),...d,children:[i,(0,s.jsx)(n.A,{className:"ml-auto"})]})});h.displayName=r.ZP.displayName;let f=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(r.G5,{ref:a,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...l})});f.displayName=r.G5.displayName;let p=l.forwardRef((e,a)=>{let{className:t,sideOffset:l=4,...n}=e;return(0,s.jsx)(r.ZL,{children:(0,s.jsx)(r.UC,{ref:a,sideOffset:l,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})})});p.displayName=r.UC.displayName;let j=l.forwardRef((e,a)=>{let{className:t,inset:l,...n}=e;return(0,s.jsx)(r.q7,{ref:a,className:(0,o.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",l&&"pl-8",t),...n})});j.displayName=r.q7.displayName,l.forwardRef((e,a)=>{let{className:t,children:l,checked:n,...d}=e;return(0,s.jsxs)(r.H_,{ref:a,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...d,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(r.VF,{children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})}),l]})}).displayName=r.H_.displayName,l.forwardRef((e,a)=>{let{className:t,children:l,...n}=e;return(0,s.jsxs)(r.hN,{ref:a,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(r.VF,{children:(0,s.jsx)(d.A,{className:"h-2 w-2 fill-current"})})}),l]})}).displayName=r.hN.displayName;let y=l.forwardRef((e,a)=>{let{className:t,inset:l,...n}=e;return(0,s.jsx)(r.JU,{ref:a,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",l&&"pl-8",t),...n})});y.displayName=r.JU.displayName;let g=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(r.wv,{ref:a,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",t),...l})});g.displayName=r.wv.displayName},50391:(e,a,t)=>{Promise.resolve().then(t.bind(t,54364))},54364:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>eM});var s=t(95155),l=t(12115),r=t(59434);let n=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:a,className:(0,r.cn)("w-full caption-bottom text-sm",t),...l})})});n.displayName="Table";let i=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)("thead",{ref:a,className:(0,r.cn)("[&_tr]:border-b",t),...l})});i.displayName="TableHeader";let d=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)("tbody",{ref:a,className:(0,r.cn)("[&_tr:last-child]:border-0",t),...l})});d.displayName="TableBody",l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)("tfoot",{ref:a,className:(0,r.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...l})}).displayName="TableFooter";let o=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)("tr",{ref:a,className:(0,r.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...l})});o.displayName="TableRow";let c=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)("th",{ref:a,className:(0,r.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...l})});c.displayName="TableHead";let m=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)("td",{ref:a,className:(0,r.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...l})});m.displayName="TableCell",l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)("caption",{ref:a,className:(0,r.cn)("mt-4 text-sm text-muted-foreground",t),...l})}).displayName="TableCaption";var u=t(39022),x=t(83013),h=t(26126),f=t(62523),p=t(59409),j=t(30285),y=t(50172),g=t(40157);let v=(0,g.A)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),b=(0,g.A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),N=(0,g.A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),w=(0,g.A)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);var C=t(44838),k=t(66695),A=t(32044),D=t(9086),R=t(87481),M=t(46081),P=t(6101),z=t(45821),E=t(85185);l.forwardRef((e,a)=>{let{children:t,...r}=e,n=l.Children.toArray(t),i=n.find(B);if(i){let e=i.props.children,t=n.map(a=>a!==i?a:l.Children.count(e)>1?l.Children.only(null):l.isValidElement(e)?e.props.children:null);return(0,s.jsx)(S,{...r,ref:a,children:l.isValidElement(e)?l.cloneElement(e,void 0,t):null})}return(0,s.jsx)(S,{...r,ref:a,children:t})}).displayName="Slot";var S=l.forwardRef((e,a)=>{let{children:t,...s}=e;if(l.isValidElement(t)){let e=function(e){let a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,t=a&&"isReactWarning"in a&&a.isReactWarning;return t?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref}(t),r=function(e,a){let t={...a};for(let s in a){let l=e[s],r=a[s];/^on[A-Z]/.test(s)?l&&r?t[s]=(...e)=>{r(...e),l(...e)}:l&&(t[s]=l):"style"===s?t[s]={...l,...r}:"className"===s&&(t[s]=[l,r].filter(Boolean).join(" "))}return{...e,...t}}(s,t.props);return t.type!==l.Fragment&&(r.ref=a?(0,P.t)(a,e):e),l.cloneElement(t,r)}return l.Children.count(t)>1?l.Children.only(null):null});S.displayName="SlotClone";var _=({children:e})=>(0,s.jsx)(s.Fragment,{children:e});function B(e){return l.isValidElement(e)&&e.type===_}var q="AlertDialog",[F,V]=(0,M.A)(q,[z.Hs]),O=(0,z.Hs)(),T=e=>{let{__scopeAlertDialog:a,...t}=e,l=O(a);return(0,s.jsx)(z.bL,{...l,...t,modal:!0})};T.displayName=q;var J=l.forwardRef((e,a)=>{let{__scopeAlertDialog:t,...l}=e,r=O(t);return(0,s.jsx)(z.l9,{...r,...l,ref:a})});J.displayName="AlertDialogTrigger";var H=e=>{let{__scopeAlertDialog:a,...t}=e,l=O(a);return(0,s.jsx)(z.ZL,{...l,...t})};H.displayName="AlertDialogPortal";var I=l.forwardRef((e,a)=>{let{__scopeAlertDialog:t,...l}=e,r=O(t);return(0,s.jsx)(z.hJ,{...r,...l,ref:a})});I.displayName="AlertDialogOverlay";var L="AlertDialogContent",[U,$]=F(L),Z=l.forwardRef((e,a)=>{let{__scopeAlertDialog:t,children:r,...n}=e,i=O(t),d=l.useRef(null),o=(0,P.s)(a,d),c=l.useRef(null);return(0,s.jsx)(z.G$,{contentName:L,titleName:W,docsSlug:"alert-dialog",children:(0,s.jsx)(U,{scope:t,cancelRef:c,children:(0,s.jsxs)(z.UC,{role:"alertdialog",...i,...n,ref:o,onOpenAutoFocus:(0,E.m)(n.onOpenAutoFocus,e=>{var a;e.preventDefault(),null==(a=c.current)||a.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,s.jsx)(_,{children:r}),(0,s.jsx)(ea,{contentRef:d})]})})})});Z.displayName=L;var W="AlertDialogTitle",Y=l.forwardRef((e,a)=>{let{__scopeAlertDialog:t,...l}=e,r=O(t);return(0,s.jsx)(z.hE,{...r,...l,ref:a})});Y.displayName=W;var G="AlertDialogDescription",Q=l.forwardRef((e,a)=>{let{__scopeAlertDialog:t,...l}=e,r=O(t);return(0,s.jsx)(z.VY,{...r,...l,ref:a})});Q.displayName=G;var X=l.forwardRef((e,a)=>{let{__scopeAlertDialog:t,...l}=e,r=O(t);return(0,s.jsx)(z.bm,{...r,...l,ref:a})});X.displayName="AlertDialogAction";var K="AlertDialogCancel",ee=l.forwardRef((e,a)=>{let{__scopeAlertDialog:t,...l}=e,{cancelRef:r}=$(K,t),n=O(t),i=(0,P.s)(a,r);return(0,s.jsx)(z.bm,{...n,...l,ref:i})});ee.displayName=K;var ea=e=>{let{contentRef:a}=e,t="`".concat(L,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(L,"` by passing a `").concat(G,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(L,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return l.useEffect(()=>{var e;document.getElementById(null==(e=a.current)?void 0:e.getAttribute("aria-describedby"))||console.warn(t)},[t,a]),null};let et=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(I,{className:(0,r.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...l,ref:a})});et.displayName=I.displayName;let es=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsxs)(H,{children:[(0,s.jsx)(et,{}),(0,s.jsx)(Z,{ref:a,className:(0,r.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...l})]})});es.displayName=Z.displayName;let el=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,r.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...t})};el.displayName="AlertDialogHeader";let er=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,r.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};er.displayName="AlertDialogFooter";let en=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(Y,{ref:a,className:(0,r.cn)("text-lg font-semibold",t),...l})});en.displayName=Y.displayName;let ei=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(Q,{ref:a,className:(0,r.cn)("text-sm text-muted-foreground",t),...l})});ei.displayName=Q.displayName;let ed=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(X,{ref:a,className:(0,r.cn)((0,j.r)(),t),...l})});ed.displayName=X.displayName;let eo=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(ee,{ref:a,className:(0,r.cn)((0,j.r)({variant:"outline"}),"mt-2 sm:mt-0",t),...l})});eo.displayName=ee.displayName;var ec=t(68856),em=t(38382),eu=t(85057),ex=t(62177),eh=t(90221),ef=t(55594),ep=t(17759),ej=t(14636),ey=t(51920),eg=t(85511);let ev=ef.z.object({name:ef.z.string().min(1,"Bill name is required"),amount:ef.z.coerce.number().positive("Amount must be positive"),dueDate:ef.z.date({required_error:"Due date is required"}),frequency:ef.z.enum(["one-time","monthly","yearly"]),category:ef.z.string().min(1,"Category is required")});function eb(e){let{bill:a,isOpen:t,onOpenChange:l,onBillUpdated:n}=e,{user:i}=(0,A.A)(),{toast:d}=(0,R.dj)(),o=(0,ex.mN)({resolver:(0,eh.u)(ev),defaultValues:{name:a.name,amount:a.amount,dueDate:new Date(a.dueDate),frequency:a.frequency,category:a.category}}),{isSubmitting:c}=o.formState,m=async e=>{if(!i)return void d({variant:"destructive",title:"Error",description:"You must be logged in to update a bill."});let t={name:e.name,amount:e.amount,dueDate:e.dueDate,frequency:e.frequency,category:e.category};try{await (0,D.Ns)(i.uid,a.id,t),d({title:"Success!",description:"Your bill has been updated."}),n()}catch(e){console.error(e),d({variant:"destructive",title:"Error updating bill",description:"There was a problem saving your bill. Please try again."})}};return(0,s.jsx)(em.cj,{open:t,onOpenChange:l,children:(0,s.jsxs)(em.h,{children:[(0,s.jsxs)(em.Fm,{children:[(0,s.jsx)(em.qp,{children:"Edit Bill"}),(0,s.jsx)(em.Qs,{children:"Update the details of your bill below."})]}),(0,s.jsx)(ep.lV,{...o,children:(0,s.jsxs)("form",{onSubmit:o.handleSubmit(m),className:"space-y-4 py-4",children:[(0,s.jsx)(ep.zB,{control:o.control,name:"name",render:e=>{let{field:a}=e;return(0,s.jsxs)(ep.eI,{children:[(0,s.jsx)(eu.J,{children:"Name"}),(0,s.jsx)(ep.MJ,{children:(0,s.jsx)(f.p,{placeholder:"e.g., Netflix, Rent",...a})}),(0,s.jsx)(ep.C5,{})]})}}),(0,s.jsx)(ep.zB,{control:o.control,name:"amount",render:e=>{let{field:a}=e;return(0,s.jsxs)(ep.eI,{children:[(0,s.jsx)(eu.J,{children:"Amount"}),(0,s.jsx)(ep.MJ,{children:(0,s.jsx)(f.p,{type:"number",placeholder:"0.00",...a})}),(0,s.jsx)(ep.C5,{})]})}}),(0,s.jsx)(ep.zB,{control:o.control,name:"dueDate",render:e=>{let{field:a}=e;return(0,s.jsxs)(ep.eI,{className:"flex flex-col",children:[(0,s.jsx)(eu.J,{children:"Due Date"}),(0,s.jsxs)(ej.AM,{children:[(0,s.jsx)(ej.Wv,{asChild:!0,children:(0,s.jsx)(ep.MJ,{children:(0,s.jsxs)(j.$,{variant:"outline",className:(0,r.cn)("w-full pl-3 text-left font-normal",!a.value&&"text-muted-foreground"),children:[a.value?(0,x.GP)(a.value,"PPP"):(0,s.jsx)("span",{children:"Pick a date"}),(0,s.jsx)(ey.A,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,s.jsx)(ej.hl,{className:"w-auto p-0",align:"start",children:(0,s.jsx)(eg.V,{mode:"single",selected:a.value,onSelect:a.onChange,disabled:e=>e<new Date("1900-01-01"),initialFocus:!0})})]}),(0,s.jsx)(ep.C5,{})]})}}),(0,s.jsx)(ep.zB,{control:o.control,name:"frequency",render:e=>{let{field:a}=e;return(0,s.jsxs)(ep.eI,{children:[(0,s.jsx)(eu.J,{children:"Frequency"}),(0,s.jsxs)(p.l6,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,s.jsx)(ep.MJ,{children:(0,s.jsx)(p.bq,{children:(0,s.jsx)(p.yv,{placeholder:"Select frequency"})})}),(0,s.jsxs)(p.gC,{children:[(0,s.jsx)(p.eb,{value:"one-time",children:"One-time"}),(0,s.jsx)(p.eb,{value:"monthly",children:"Monthly"}),(0,s.jsx)(p.eb,{value:"yearly",children:"Yearly"})]})]}),(0,s.jsx)(ep.C5,{})]})}}),(0,s.jsx)(ep.zB,{control:o.control,name:"category",render:e=>{let{field:a}=e;return(0,s.jsxs)(ep.eI,{children:[(0,s.jsx)(eu.J,{children:"Category"}),(0,s.jsxs)(p.l6,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,s.jsx)(ep.MJ,{children:(0,s.jsx)(p.bq,{children:(0,s.jsx)(p.yv,{placeholder:"Select a category"})})}),(0,s.jsx)(p.gC,{children:u.L.map(e=>(0,s.jsx)(p.eb,{value:e.name,children:e.name},e.name))})]}),(0,s.jsx)(ep.C5,{})]})}}),(0,s.jsx)(em.XW,{children:(0,s.jsxs)(j.$,{type:"submit",disabled:c,children:[c&&(0,s.jsx)(y.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})})]})})]})})}function eN(e){let{bills:a,loading:t,onBillUpdated:r}=e,[g,M]=(0,l.useState)(""),[P,z]=(0,l.useState)("All"),[E,S]=(0,l.useState)({key:"dueDate",direction:"asc"}),{user:_}=(0,A.A)(),{toast:B}=(0,R.dj)(),[q,F]=(0,l.useTransition)(),[V,O]=(0,l.useState)(null),H=e=>{let a="asc";E&&E.key===e&&"asc"===E.direction&&(a="desc"),S({key:e,direction:a})},I=(0,l.useMemo)(()=>{let e=[...a];return null!==E&&e.sort((e,a)=>e[E.key]<a[E.key]?"asc"===E.direction?-1:1:e[E.key]>a[E.key]?"asc"===E.direction?1:-1:0),e},[a,E]),L=(0,l.useMemo)(()=>I.filter(e=>{let a=e.name.toLowerCase().includes(g.toLowerCase()),t="All"===P||e.category===P;return a&&t}),[I,g,P]),U=e=>{_&&F(async()=>{try{await (0,D.Ns)(_.uid,e.id,{isPaid:!e.isPaid}),r(),B({title:"Success",description:"".concat(e.name," marked as ").concat(e.isPaid?"unpaid":"paid",".")})}catch(e){B({variant:"destructive",title:"Error",description:"Failed to update bill status."})}})},$=e=>{_&&F(async()=>{try{await (0,D.LM)(_.uid,e),r(),B({title:"Success",description:"Bill deleted successfully."})}catch(e){B({variant:"destructive",title:"Error",description:"Failed to delete bill."})}})},Z=e=>{let a=u.L.find(a=>a.name===e);return a?(0,s.jsx)(a.icon,{className:"w-5 h-5 mr-2"}):null};return t?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-center gap-4 py-4",children:[(0,s.jsx)(ec.E,{className:"h-10 w-full md:max-w-sm"}),(0,s.jsx)(ec.E,{className:"h-10 w-full md:w-[180px]"})]}),(0,s.jsx)(ec.E,{className:"h-64 w-full"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-center gap-4 py-4",children:[(0,s.jsx)(f.p,{placeholder:"Filter bills by name...",value:g,onChange:e=>M(e.target.value),className:"w-full md:max-w-sm",disabled:q}),(0,s.jsxs)(p.l6,{value:P,onValueChange:z,disabled:q,children:[(0,s.jsx)(p.bq,{className:"w-full md:w-[180px]",children:(0,s.jsx)(p.yv,{placeholder:"Filter by category"})}),(0,s.jsxs)(p.gC,{children:[(0,s.jsx)(p.eb,{value:"All",children:"All Categories"}),u.L.map(e=>(0,s.jsx)(p.eb,{value:e.name,children:e.name},e.name))]})]}),q&&(0,s.jsx)(y.A,{className:"h-5 w-5 animate-spin"})]}),(0,s.jsx)("div",{className:"md:hidden space-y-4",children:L.map(e=>(0,s.jsxs)(k.Zp,{"data-state":e.isPaid?"selected":"",children:[(0,s.jsxs)(k.aR,{className:"flex flex-row items-center justify-between pb-2",children:[(0,s.jsx)(k.ZB,{className:"text-lg",children:e.name}),(0,s.jsxs)(C.rI,{children:[(0,s.jsx)(C.ty,{asChild:!0,children:(0,s.jsxs)(j.$,{variant:"ghost",className:"h-8 w-8 p-0",disabled:q,children:[(0,s.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,s.jsx)(v,{className:"h-4 w-4"})]})}),(0,s.jsxs)(C.SQ,{align:"end",children:[(0,s.jsx)(C.lp,{children:"Actions"}),(0,s.jsx)(C._2,{onClick:()=>U(e),children:e.isPaid?"Mark as Unpaid":"Mark as Paid"}),(0,s.jsxs)(C._2,{onClick:()=>O(e),children:[(0,s.jsx)(b,{className:"mr-2 h-4 w-4"}),"Edit Bill"]}),(0,s.jsx)(C.mB,{}),(0,s.jsxs)(T,{children:[(0,s.jsx)(J,{asChild:!0,children:(0,s.jsxs)(C._2,{onSelect:e=>e.preventDefault(),className:"text-destructive focus:bg-destructive/10 focus:text-destructive",children:[(0,s.jsx)(N,{className:"mr-2 h-4 w-4"}),"Delete"]})}),(0,s.jsxs)(es,{children:[(0,s.jsxs)(el,{children:[(0,s.jsx)(en,{children:"Are you sure?"}),(0,s.jsxs)(ei,{children:["This action cannot be undone. This will permanently delete the bill for ",e.name,"."]})]}),(0,s.jsxs)(er,{children:[(0,s.jsx)(eo,{children:"Cancel"}),(0,s.jsx)(ed,{className:"bg-destructive hover:bg-destructive/90",onClick:()=>$(e.id),children:"Delete"})]})]})]})]})]})]}),(0,s.jsxs)(k.Wu,{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)(h.E,{variant:e.isPaid?"secondary":"destructive",children:e.isPaid?"Paid":"Due"}),(0,s.jsxs)("p",{className:"font-bold font-mono text-lg",children:["R",e.amount.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[Z(e.category),e.category]}),(0,s.jsxs)("p",{children:["Due: ",(0,x.GP)(new Date(e.dueDate),"MMM dd, yyyy")]})]})]})]},e.id))}),(0,s.jsx)(k.Zp,{className:"hidden md:block",children:(0,s.jsxs)(n,{children:[(0,s.jsx)(i,{children:(0,s.jsxs)(o,{children:[(0,s.jsx)(c,{className:"w-[100px]",children:"Status"}),(0,s.jsx)(c,{children:(0,s.jsxs)(j.$,{variant:"ghost",onClick:()=>H("name"),disabled:q,children:["Bill",(0,s.jsx)(w,{className:"ml-2 h-4 w-4"})]})}),(0,s.jsx)(c,{children:(0,s.jsxs)(j.$,{variant:"ghost",onClick:()=>H("category"),disabled:q,children:["Category",(0,s.jsx)(w,{className:"ml-2 h-4 w-4"})]})}),(0,s.jsx)(c,{className:"text-right",children:(0,s.jsxs)(j.$,{variant:"ghost",onClick:()=>H("amount"),disabled:q,children:["Amount",(0,s.jsx)(w,{className:"ml-2 h-4 w-4"})]})}),(0,s.jsx)(c,{children:(0,s.jsxs)(j.$,{variant:"ghost",onClick:()=>H("dueDate"),disabled:q,children:["Due Date",(0,s.jsx)(w,{className:"ml-2 h-4 w-4"})]})}),(0,s.jsx)(c,{})]})}),(0,s.jsx)(d,{children:L.map(e=>(0,s.jsxs)(o,{"data-state":e.isPaid?"selected":"",children:[(0,s.jsx)(m,{children:(0,s.jsx)(h.E,{variant:e.isPaid?"secondary":"destructive",children:e.isPaid?"Paid":"Due"})}),(0,s.jsx)(m,{className:"font-medium",children:e.name}),(0,s.jsx)(m,{children:(0,s.jsxs)("div",{className:"flex items-center",children:[Z(e.category),e.category]})}),(0,s.jsxs)(m,{className:"text-right font-mono",children:["R",e.amount.toFixed(2)]}),(0,s.jsx)(m,{children:(0,x.GP)(new Date(e.dueDate),"MMM dd, yyyy")}),(0,s.jsx)(m,{children:(0,s.jsxs)(C.rI,{children:[(0,s.jsx)(C.ty,{asChild:!0,children:(0,s.jsxs)(j.$,{variant:"ghost",className:"h-8 w-8 p-0",disabled:q,children:[(0,s.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,s.jsx)(v,{className:"h-4 w-4"})]})}),(0,s.jsxs)(C.SQ,{align:"end",children:[(0,s.jsx)(C.lp,{children:"Actions"}),(0,s.jsx)(C._2,{onClick:()=>U(e),children:e.isPaid?"Mark as Unpaid":"Mark as Paid"}),(0,s.jsxs)(C._2,{onClick:()=>O(e),children:[(0,s.jsx)(b,{className:"mr-2 h-4 w-4"}),"Edit Bill"]}),(0,s.jsx)(C.mB,{}),(0,s.jsxs)(T,{children:[(0,s.jsx)(J,{asChild:!0,children:(0,s.jsxs)(C._2,{onSelect:e=>e.preventDefault(),className:"text-destructive focus:bg-destructive/10 focus:text-destructive",children:[(0,s.jsx)(N,{className:"mr-2 h-4 w-4"}),"Delete"]})}),(0,s.jsxs)(es,{children:[(0,s.jsxs)(el,{children:[(0,s.jsx)(en,{children:"Are you absolutely sure?"}),(0,s.jsxs)(ei,{children:["This action cannot be undone. This will permanently delete the bill for ",e.name,"."]})]}),(0,s.jsxs)(er,{children:[(0,s.jsx)(eo,{children:"Cancel"}),(0,s.jsx)(ed,{className:"bg-destructive hover:bg-destructive/90",onClick:()=>$(e.id),children:"Delete"})]})]})]})]})]})})]},e.id))})]})}),0===L.length&&!t&&(0,s.jsx)("div",{className:"text-center text-muted-foreground pt-8",children:"You have no bills. Add one to get started!"})]}),V&&(0,s.jsx)(eb,{bill:V,isOpen:!!V,onOpenChange:e=>!e&&O(null),onBillUpdated:()=>{O(null),r()}})]})}var ew=t(34419);let eC=(0,g.A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var ek=t(34301),eA=t(74737),eD=t(6874),eR=t.n(eD);function eM(){let{bills:e,loading:a,refetch:t}=(0,D.u1)();return(0,s.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,s.jsx)(eA.z,{title:"My Bills",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-2",children:[(0,s.jsx)(j.$,{variant:"outline",asChild:!0,children:(0,s.jsxs)(eR(),{href:"/bills/import",children:[(0,s.jsx)(eC,{className:"mr-2"}),"Import from Notes"]})}),(0,s.jsx)(ew.k,{onBillAdded:t,children:(0,s.jsxs)(j.$,{children:[(0,s.jsx)(ek.A,{className:"mr-2"}),"Add Bill"]})})]})}),(0,s.jsx)("main",{className:"flex-1 py-8 px-4 md:px-8",children:(0,s.jsx)(eN,{bills:e,loading:a,onBillUpdated:t})})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[992,644,521,419,902,13,425,43,323,937,33,565,441,684,358],()=>a(50391)),_N_E=e.O()}]);