(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[57],{5349:(e,t,r)=>{"use strict";r.d(t,{S:()=>C});var a=r(95155),s=r(12115),n=r(6101),l=r(46081),i=r(85185),o=r(5845),c=r(45503),d=r(11275),u=r(28905),m=r(63540),f="Checkbox",[p,x]=(0,l.A)(f),[h,y]=p(f),g=s.forwardRef((e,t)=>{let{__scopeCheckbox:r,name:l,checked:c,defaultChecked:d,required:u,disabled:f,value:p="on",onCheckedChange:x,form:y,...g}=e,[v,b]=s.useState(null),N=(0,n.s)(t,e=>b(e)),A=s.useRef(!1),C=!v||y||!!v.closest("form"),[D=!1,R]=(0,o.i)({prop:c,defaultProp:d,onChange:x}),S=s.useRef(D);return s.useEffect(()=>{let e=null==v?void 0:v.form;if(e){let t=()=>R(S.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[v,R]),(0,a.jsxs)(h,{scope:r,state:D,disabled:f,children:[(0,a.jsx)(m.sG.button,{type:"button",role:"checkbox","aria-checked":j(D)?"mixed":D,"aria-required":u,"data-state":k(D),"data-disabled":f?"":void 0,disabled:f,value:p,...g,ref:N,onKeyDown:(0,i.m)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,i.m)(e.onClick,e=>{R(e=>!!j(e)||!e),C&&(A.current=e.isPropagationStopped(),A.current||e.stopPropagation())})}),C&&(0,a.jsx)(w,{control:v,bubbles:!A.current,name:l,value:p,checked:D,required:u,disabled:f,form:y,style:{transform:"translateX(-100%)"},defaultChecked:!j(d)&&d})]})});g.displayName=f;var v="CheckboxIndicator",b=s.forwardRef((e,t)=>{let{__scopeCheckbox:r,forceMount:s,...n}=e,l=y(v,r);return(0,a.jsx)(u.C,{present:s||j(l.state)||!0===l.state,children:(0,a.jsx)(m.sG.span,{"data-state":k(l.state),"data-disabled":l.disabled?"":void 0,...n,ref:t,style:{pointerEvents:"none",...e.style}})})});b.displayName=v;var w=e=>{let{control:t,checked:r,bubbles:n=!0,defaultChecked:l,...i}=e,o=s.useRef(null),u=(0,c.Z)(r),m=(0,d.X)(t);s.useEffect(()=>{let e=o.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(u!==r&&t){let a=new Event("click",{bubbles:n});e.indeterminate=j(r),t.call(e,!j(r)&&r),e.dispatchEvent(a)}},[u,r,n]);let f=s.useRef(!j(r)&&r);return(0,a.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:null!=l?l:f.current,...i,tabIndex:-1,ref:o,style:{...e.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function j(e){return"indeterminate"===e}function k(e){return j(e)?"indeterminate":e?"checked":"unchecked"}var N=r(10518),A=r(59434);let C=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(g,{ref:t,className:(0,A.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...s,children:(0,a.jsx)(b,{className:(0,A.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(N.A,{className:"h-4 w-4"})})})});C.displayName=g.displayName},10518:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(40157).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},18186:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(40157).A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},28328:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(40157).A)("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]])},36860:(e,t,r)=>{Promise.resolve().then(r.bind(r,52123))},39022:(e,t,r)=>{"use strict";r.d(t,{L:()=>c});var a=r(18186),s=r(89829),n=r(28328),l=r(94815),i=r(59069),o=r(55166);let c=[{name:"Housing",icon:a.A},{name:"Utilities",icon:s.A},{name:"Transportation",icon:n.A},{name:"Groceries",icon:l.A},{name:"Subscription",icon:i.A},{name:"Other",icon:o.A}];new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString(),new Date(new Date().getFullYear(),new Date().getMonth(),5).toISOString(),new Date(new Date().getFullYear(),new Date().getMonth(),15).toISOString(),new Date(new Date().getFullYear(),new Date().getMonth(),20).toISOString(),new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString(),new Date(new Date().getFullYear(),new Date().getMonth(),25).toISOString(),new Date(new Date().getFullYear(),5,10).toISOString()},45503:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r(12115);function s(e){let t=a.useRef({value:e,previous:e});return a.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}},52123:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>N});var a=r(95155),s=r(12115),n=r(74737),l=r(66695),i=r(59434);let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...s})});o.displayName="Textarea";var c=r(30285),d=r(50172),u=r(35695),m=r(5349),f=r(32044),p=r(9086),x=r(87481);let h=(0,r(74466).F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),y=s.forwardRef((e,t)=>{let{className:r,variant:s,...n}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(h({variant:s}),r),...n})});y.displayName="Alert";let g=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",r),...s})});g.displayName="AlertTitle";let v=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",r),...s})});v.displayName="AlertDescription";var b=r(83013),w=r(39022);function j(e){let{bills:t,onCancel:r}=e,[n,i]=(0,s.useState)(t),[o,h]=(0,s.useTransition)(),{user:j}=(0,f.A)(),{toast:k}=(0,x.dj)(),N=(0,u.useRouter)(),A=(e,t)=>{t?i(t=>[...t,e]):i(t=>t.filter(t=>t.name!==e.name&&t.amount!==e.amount))},C=e=>{let t=w.L.find(t=>t.name===e);return t?(0,a.jsx)(t.icon,{className:"w-5 h-5 text-muted-foreground"}):null};return(0,a.jsx)("div",{className:"flex flex-col min-h-screen",children:(0,a.jsx)("div",{className:"flex-1 py-8 px-4 md:px-8 flex items-start justify-center",children:(0,a.jsxs)(l.Zp,{className:"w-full max-w-3xl",children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Confirm Your Bills"}),(0,a.jsx)(l.BT,{children:"We've extracted the following bills from your notes. Please review and uncheck any you don't want to import."})]}),(0,a.jsx)(l.Wu,{children:0===t.length?(0,a.jsxs)(y,{children:[(0,a.jsx)(g,{children:"No Bills Found"}),(0,a.jsx)(v,{children:"We couldn't parse any bills from your notes. Please try again."})]}):(0,a.jsx)("div",{className:"space-y-4",children:t.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-4 p-4 border rounded-lg",children:[(0,a.jsx)(m.S,{id:"bill-".concat(t),checked:n.some(t=>t.name===e.name&&t.amount===e.amount),onCheckedChange:t=>A(e,!!t),className:"w-5 h-5"}),(0,a.jsxs)("label",{htmlFor:"bill-".concat(t),className:"flex-1 grid grid-cols-2 md:grid-cols-4 items-center gap-4 cursor-pointer",children:[(0,a.jsx)("span",{className:"font-semibold truncate",children:e.name}),(0,a.jsxs)("span",{className:"font-mono text-right md:text-left",children:["R",e.amount.toFixed(2)]}),(0,a.jsx)("span",{children:(0,b.GP)(new Date(e.dueDate),"PPP")}),(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[C(e.category),e.category]})]})]},t))})}),(0,a.jsxs)(l.wL,{className:"flex justify-end gap-2",children:[(0,a.jsx)(c.$,{variant:"outline",onClick:r,disabled:o,children:"Cancel"}),(0,a.jsxs)(c.$,{onClick:()=>j?0===n.length?void k({variant:"destructive",title:"No bills selected."}):void h(async()=>{let e=0,t=0;for(let r of n)try{let t=new Date(r.dueDate);if(isNaN(t.getTime()))throw Error("Invalid date for bill: ".concat(r.name));await (0,p.xQ)(j.uid,{...r,dueDate:t,isPaid:!1}),e++}catch(e){console.error("Failed to import bill: ".concat(r.name),e),t++}k({title:"Import Complete",description:"".concat(e," bills imported successfully. ").concat(t>0?"".concat(t," failed."):"")}),N.push("/bills")}):void k({variant:"destructive",title:"You must be logged in."}),disabled:o||0===n.length,children:[o&&(0,a.jsx)(d.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Import ",n.length," ",1===n.length?"Bill":"Bills"]})]})]})})})}async function k(e){let t=await fetch("".concat("https://bill-import-api.vercel.app","/api/import-bills"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json()).error||"Failed to import bills");return t.json()}function N(){let[e,t]=(0,s.useState)(""),[r,i]=(0,s.useState)(!1),[u,m]=(0,s.useState)(null),[f,p]=(0,s.useState)(null),x=async()=>{if(!e.trim())return void m("Please paste some text to process.");i(!0),m(null),p(null);try{let t=await k({text:e});0===t.bills.length?m("We couldn't find any bills in the text you provided. Try formatting it as a simple list."):p(t.bills)}catch(e){console.error("Import error:",e),m(e instanceof Error?e.message:"An unexpected error occurred while parsing your notes. Please try again.")}finally{i(!1)}};return f?(0,a.jsx)(j,{bills:f,onCancel:()=>{t(""),p(null),m(null)}}):(0,a.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,a.jsx)(n.z,{title:"Import from Notes"}),(0,a.jsx)("main",{className:"flex-1 py-8 px-4 md:px-8 flex items-start justify-center",children:(0,a.jsxs)(l.Zp,{className:"w-full max-w-2xl",children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Paste Your Bills"}),(0,a.jsx)(l.BT,{children:"Copy the bill details from your notes app and paste them below. The AI will attempt to extract them automatically. For best results, use one line per bill."})]}),(0,a.jsxs)(l.Wu,{className:"space-y-4",children:[(0,a.jsx)(o,{value:e,onChange:e=>t(e.target.value),placeholder:"e.g. Netflix R199 due on the 5th Rent R12000 due date is the 1st of the month Car Payment R3500 20/07/2024",className:"min-h-48",disabled:r}),u&&(0,a.jsxs)(y,{variant:"destructive",children:[(0,a.jsx)(g,{children:"Error"}),(0,a.jsx)(v,{children:u})]}),(0,a.jsxs)(c.$,{onClick:x,disabled:r,className:"w-full",children:[r&&(0,a.jsx)(d.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Process Notes"]})]})]})})]})}},55166:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(40157).A)("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]])},59069:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(40157).A)("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]])},66695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>o,Zp:()=>l,aR:()=>i,wL:()=>u});var a=r(95155),s=r(12115),n=r(59434);let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});l.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});i.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});o.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},74737:(e,t,r)=>{"use strict";r.d(t,{z:()=>l});var a=r(95155),s=r(84407),n=r(59434);function l(e){let{title:t,children:r,className:l}=e;return(0,a.jsxs)("header",{className:(0,n.cn)("flex items-center justify-between pb-4 border-b sticky top-0 bg-background z-10 p-4 md:p-0 md:relative md:bg-transparent md:border-none",l),children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(s.SidebarTrigger,{className:"md:hidden"}),(0,a.jsx)("h1",{className:"text-3xl font-bold font-headline",children:t})]}),r]})}},89829:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(40157).A)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},94815:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(40157).A)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[992,644,615,419,13,33,441,684,358],()=>t(36860)),_N_E=e.O()}]);